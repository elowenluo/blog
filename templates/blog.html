{% extends "base.html" %}

{% block content %}
<article class="blog-section">
  <header class="blog-header">
    <h1>{{ section.title }}</h1>
    {% if section.description %}
      <p class="section-description">{{ section.description }}</p>
    {% endif %}
  </header>

  <div class="blog-layout">
    <section class="posts">
      {% if paginator.pages %}
        <ul class="post-list">
          {% for page in paginator.pages %}
            <li class="post-item">
              <article class="post">
                <header class="post-header">
                  <h2 class="post-title"><a href="{{ page.permalink }}">{{ page.title }}</a></h2>
                  {% if page.date %}
                    <time class="post-date" datetime="{{ page.date }}">{{ page.date | date(format="%B %d, %Y") }}</time>
                  {% endif %}
                </header>
                {% if page.description %}
                  <div class="post-summary">{{ page.description }}</div>
                {% endif %}
              </article>
            </li>
          {% endfor %}
        </ul>

        {% if paginator.number_pagers > 1 %}
          <nav class="pagination" aria-label="Pagination">
            <ul class="pagination-list">
              {% if paginator.previous %}
                <li class="page-item prev">
                  <a href="{{ paginator.previous }}" aria-label="Previous page">← Previous</a>
                </li>
              {% else %}
                <li class="page-item prev disabled">
                  <span>← Previous</span>
                </li>
              {% endif %}
              
              <!-- 保留原有分页逻辑代码 -->
              
              {% if paginator.next %}
                <li class="page-item next">
                  <a href="{{ paginator.next }}" aria-label="Next page">Next →</a>
                </li>
              {% else %}
                <li class="page-item next disabled">
                  <span>Next →</span>
                </li>
              {% endif %}
            </ul>
          </nav>
        {% endif %}
      {% else %}
        <p class="no-posts">No posts available</p>
      {% endif %}
    </section>

    <aside class="sidebar">
      {% if section.taxonomies %}
        <section class="taxonomy-section">
          <h2>Categories</h2>
          {% if section.taxonomies.categories %}
            <ul class="taxonomy-list category-list">
              {% for category, pages in section.taxonomies.categories | sort(attribute="1", reverse=true) %}
                <li class="taxonomy-item">
                  <a href="{{ get_taxonomy_url(kind="categories", name=category) }}">
                    {{ category }} <span class="count">({{ pages | length }})</span>
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p>No categories available</p>
          {% endif %}
        </section>

        <section class="taxonomy-section">
          <h2>Tags</h2>
          {% if section.taxonomies.tags %}
            <ul class="taxonomy-list tag-cloud">
              {% for tag, pages in section.taxonomies.tags | sort(attribute="1", reverse=true) %}
                <li class="taxonomy-item tag-item">
                  <a href="{{ get_taxonomy_url(kind="tags", name=tag) }}" 
                    class="tag {% if pages | length > 10 %}tag-popular{% elif pages | length > 5 %}tag-medium{% else %}tag-small{% endif %}">
                    {{ tag }} <span class="count">({{ pages | length }})</span>
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p>No tags available</p>
          {% endif %}
        </section>
      {% endif %}
    </aside>
  </div>
</article>
{% endblock content %}